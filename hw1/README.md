# UString
## Реализация класса типа std::string для работы с utf-8

## Методы класса UString
- Конструктор с аргументом - строкой std::string - строка посимвольно обрабатывается методом push_back(), который выполняет проверку корректности UTF-8 и в случае ошибки генерирует прерывание
- Конструктор с аргументом - строкой std::u32string - аналогично конструктору выше, но для символов UTF-32
- Оператор присваивания строки std::string - строка очищается и посимвольно добавляется через push_back(), в котором выполняется контроль данных и генерируется прерывание в случае ошибки
- Оператор присваивания строки std::u32string - аналогично присваиванию выше, но для символов UTF-32
- Оператор сложения с аргументом типа UString - выполняется через оператор "+=", в котором происходит суммирование строк типа std::string
- Операторы ==, != - первый оператор выполняет сравнение приватных переменных типа std::string, а второй выполняет обратное действие
- length() - возвращает число символов UTF-8
- size() - возвращает число байт
- count_by_size(k) - возвращает число символов, занимающих k байт
- charlen() - приватный метод, который возвращает длину UTF-символа в байтах (от 1 до 4), в качестве аргумента на вход принимается переменная типа size_t, означающая позицию в строке data_
- push_back() - выясняет длину символа в байтах и добавляет в приватную переменную от 1 до 4 байт, а в случае ошибки генерируется прерывание. Метод реализован как для std::string, так и для char32_t
- pop_back() - если строка пустая, ничего не делает, в противном случае при помощи итератора уменьшает строку на один UTF-символ
- is_well() - была призвана контролировать корректность получаемых данных в зависимости от длины UTF-символов, однако, в настоящий момент, за счёт входного контроля, функция ценности не представляет
- clear() - очитка переменной data_ типа std::string
- << - вывод хранимой строки в поток

## Итератор класса UString
- разыменование (типа char32_t)
- begin(), end(), it++, ++it, it--, --it, ==, !=
Оператор класса не может выйти за границы begin() и end()


## Примечание
При компиляции кода с переменной DEBUG создаётся публичная переменная std::string debug_, в которую заносится текстовая информация для отладки

## Файлы:
- `ustring.hpp` - основной файл класса
- `showstats.cpp` - программа считывает utf-8 строку, добавляет символ, удаляет символ, выводит число utf-8, размер в байтах, число символов каждой длины, оригинальную строку и проверяет валидность формата utf-8
- `checker.sh` - интеграционный тест, использующий исполнимый файл `showstats`. Реализован на языке оболочки `ksh`
- `checker_sh.out` - результат работы `checker.sh`
- `test.dat` - набор тестовых данных для `checker.sh`
- `catch2.cpp` - модуль с тестами Catch2
- `CMakeLists.txt` - файл для `cmake`

> В тестах используются символы ASCII,
> кириллица, греческие символы, тайские,
> эфиопские, рунические, брайль, иероглифы,
> маджонг, домино, карты, эмодзи.
> Таким образом охвачены все разновидности uft-8
> от 1 до 4 байт.

> При компиляции cmake используются ключи `-std=c++20 -std=gnu++0x -Wall -pedantic -Werror -Wextra"`

**2023**
